{{>layout/header}}

<div class="container">
    <div class="row">
        <div class="col-md-3">
        </div>
        <div class="col-md-6">
            <form id="loginForm" action="/loginPost" method="POST">
                <div class="box">
                    <a href="/"><p><i class="fas fa-book"></i> 어바웃 송담</p></a>
                    <div class="user_data">
                        <input type="text" name="user_id" id="user_id" autocomplete="off" required>
                        <label for="user_id">아이디</label>
                    </div>
                    <div class="user_data">
                        <input type="password" name="user_pw" id="user_pw" autocomplete="off" required>
                        <label for="user_pw">비밀번호</label>
                    </div>
                    <div class="checkbox">
                        <div class="id-check">
                            <input type="checkbox" name="id_save" id="id_save" value="checked" checked>
                            <label for="id_save" class="checkbox-label"><span class="checkbox-text">아이디 저장</span></label>
                        </div>
                        <div class="login-check">
                            <input type="checkbox" name="login_save" id="login_save">
                            <label for="login_save" class="checkbox-label"><span class="checkbox-text">로그인 유지</span></label>
                        </div>
                    </div>
                    <div class="submit-btn">
                        <button id="btn" type="button" onclick="loginPost()">로그인</button>
                    </div>
                </div>
            </form>
        </div>
        <div class="col-md-3">
        </div>
    </div>
</div>
<script>
    let id = $('#user_id');
    let pw = $('#user_pw');
    let btn = $('#btn');

    $(btn).on('click', function() {
        if($(id).val() == "") {
            $(id).next('label').addClass('warning');
            setTimeout(function() {
                $('label').removeClass()
            }, 1500);
        }
        else if($(pw).val() == "") {
            $(pw).next('label').addClass('warning');
            setTimeout(function() {
                $('label').removeClass()
            }, 1500);
        }
    });

    var obj = { "id": id, "pw": pw };

    function loginPost() {
        $.ajax({
            url: "<c:url value="/loginPost"/>",
            type: "post",
            data: JSON.stringify(obj),
            dataType: "json",
            contentType: "application/json",
            success: function(data) {
                alert("성공");
            },
            error: function(errorThrown) {
                alert(errorThrown.statusText);
            }
        });
    }
</script>

{{>layout/footer}}